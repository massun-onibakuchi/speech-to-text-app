/*
 * Where: src/renderer/styles.css
 * What: Global renderer styles — Tailwind v4 foundation, OKLCH token system, dark base.
 * Why: Full visual reset per docs/style-update.md; replaces legacy CSS variable and custom
 *      class system with semantic OKLCH tokens mapped to Tailwind v4 utilities via @theme inline.
 *
 * UX rationale:
 *   • Dark-only palette with OKLCH tokens gives perceptual uniformity across surfaces.
 *   • Dense text scale (10px–14px) matches tool-UI vocabulary — no marketing-scale headings.
 *   • No entrance animations or translateY lifts; reduces cognitive noise for a power-user tool.
 *   • Fixed desktop layout; no breakpoints — motor memory preserved for the recording gesture.
 */

@import "tailwindcss";
@import "tw-animate-css";

/* ── Font imports (offline-safe; package-based, no CDN) ─────────────────── */
@import "@fontsource/inter/400.css";
@import "@fontsource/inter/500.css";
@import "@fontsource/inter/600.css";
@import "@fontsource/geist-mono/400.css";
@import "@fontsource/geist-mono/500.css";

/* ── Dark mode variant ──────────────────────────────────────────────────── */
@custom-variant dark (&:is(.dark *));

/* ── OKLCH semantic token system ────────────────────────────────────────── */
/*
 * Both :root and .dark are set to the same dark-first palette.
 * The app is dark-only — the HTML element always carries class="dark".
 * Using identical values keeps token resolution predictable without a light/dark split.
 */
:root,
.dark {
  /* Canvas */
  --background:         oklch(0.13 0.005 260);
  --foreground:         oklch(0.95 0 0);

  /* Cards and panels */
  --card:               oklch(0.16 0.005 260);
  --card-foreground:    oklch(0.95 0 0);

  /* Floating surfaces */
  --popover:            oklch(0.18 0.005 260);
  --popover-foreground: oklch(0.95 0 0);

  /* Primary — CTA, active states, links */
  --primary:            oklch(0.65 0.2 145);
  --primary-foreground: oklch(0.13 0.005 260);

  /* Secondary controls and inputs */
  --secondary:          oklch(0.22 0.008 260);
  --secondary-foreground: oklch(0.88 0 0);

  /* Quiet surfaces */
  --muted:              oklch(0.20 0.005 260);
  --muted-foreground:   oklch(0.55 0.01 260);

  /* Hover backgrounds */
  --accent:             oklch(0.22 0.008 260);
  --accent-foreground:  oklch(0.92 0 0);

  /* Error / danger */
  --destructive:        oklch(0.55 0.2 25);
  --destructive-foreground: oklch(0.95 0 0);

  /* Dividers, outlines */
  --border:             oklch(0.25 0.008 260);

  /* Form input backgrounds */
  --input:              oklch(0.22 0.008 260);

  /* Focus ring — same hue as primary */
  --ring:               oklch(0.65 0.2 145);

  /* Semantic status tokens */
  --success:            oklch(0.65 0.2 145);
  --success-foreground: oklch(0.13 0.005 260);
  --warning:            oklch(0.75 0.15 80);
  --warning-foreground: oklch(0.13 0.005 260);

  /* Recording state emphasis only */
  --recording:          oklch(0.65 0.25 25);
  --recording-foreground: oklch(0.95 0 0);

  /* Sidebar — darker than background */
  --sidebar:            oklch(0.11 0.005 260);

  /* Shape */
  --radius:             0.5rem;

  /* Typography */
  --font-sans: "Inter", "Geist", "Geist Fallback", ui-sans-serif, system-ui, sans-serif;
  --font-mono: "Geist Mono", "Geist Mono Fallback", ui-monospace, monospace;
}

/* ── @theme inline: bind CSS variables to Tailwind color utilities ───────── */
/*
 * Tailwind v4 requires explicit mapping from CSS variables to theme tokens.
 * This lets components use bg-primary, text-foreground, border-border, etc.
 */
@theme inline {
  --color-background:         var(--background);
  --color-foreground:         var(--foreground);
  --color-card:               var(--card);
  --color-card-foreground:    var(--card-foreground);
  --color-popover:            var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary:            var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary:          var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted:              var(--muted);
  --color-muted-foreground:   var(--muted-foreground);
  --color-accent:             var(--accent);
  --color-accent-foreground:  var(--accent-foreground);
  --color-destructive:        var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border:             var(--border);
  --color-input:              var(--input);
  --color-ring:               var(--ring);
  --color-success:            var(--success);
  --color-success-foreground: var(--success-foreground);
  --color-warning:            var(--warning);
  --color-warning-foreground: var(--warning-foreground);
  --color-recording:          var(--recording);
  --color-recording-foreground: var(--recording-foreground);
  --color-sidebar:            var(--sidebar);

  --font-family-sans: var(--font-sans);
  --font-family-mono: var(--font-mono);

  --radius-sm:  calc(var(--radius) - 4px);
  --radius-md:  calc(var(--radius) - 2px);
  --radius-lg:  var(--radius);
  --radius-xl:  calc(var(--radius) + 4px);
}

/* ── Base layer: global defaults ────────────────────────────────────────── */
/*
 * Applies token-derived borders and focus outlines globally so every component
 * picks up the design system without explicit class repetition.
 * Body gets background + text defaults; html gets the dark class lock-in.
 */
@layer base {
  * {
    @apply border-border outline-ring/50;
    box-sizing: border-box;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    margin: 0;
  }

  html,
  body,
  #app {
    min-height: 100%;
  }
}
